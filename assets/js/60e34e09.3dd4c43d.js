"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[208],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>p});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},l=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,l=u(e,["components","mdxType","originalType","parentName"]),f=c(n),p=o,h=f["".concat(s,".").concat(p)]||f[p]||d[p]||a;return n?r.createElement(h,i(i({ref:t},l),{},{components:n})):r.createElement(h,i({ref:t},l))}));function p(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=f;var u={};for(var s in t)hasOwnProperty.call(t,s)&&(u[s]=t[s]);u.originalType=e,u.mdxType="string"==typeof e?e:o,i[1]=u;for(var c=2;c<a;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},613:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>u,toc:()=>c});var r=n(7462),o=(n(7294),n(3905));const a={},i="Configuration",u={unversionedId:"docs/guides/configuration",id:"docs/guides/configuration",title:"Configuration",description:"Each query or infinite query can be configured using the QueryConfig.",source:"@site/docs/docs/guides/04-configuration.md",sourceDirName:"docs/guides",slug:"/docs/guides/configuration",permalink:"/docs/guides/configuration",draft:!1,editUrl:"https://github.com/D-James-GH/cached_query/tree/main/docs/docs/docs/guides/04-configuration.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{},sidebar:"docs",previous:{title:"Query",permalink:"/docs/guides/query"},next:{title:"Mutations",permalink:"/docs/guides/mutations"}},s={},c=[{value:"Global Configuration",id:"global-configuration",level:2}],l={toc:c};function d(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"configuration"},"Configuration"),(0,o.kt)("p",null,"Each query or infinite query can be configured using the QueryConfig."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-dart"},"final config = QueryConfig(\n  refetchDuration: Duration(seconds: 4),\n  cacheDuration: Duration(minutes: 5),\n  ignoreCacheDuration: false,\n  serializer: (dynamic data) {},\n  shouldRethrow: false,\n  storeQuery: false,\n);\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"refetchDuration"),", which defaults to 4 seconds is the amount of time after a request and before the data is marked\nas stale. So if a query is requested twice in 4 seconds there will be no call made to the queryFn, however, if a request\nis made after 4 seconds the data will be assumed to be stale and re-fetched in the background."),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"cacheDuration")," is the length of time between the last listener being removed from a query and the query being deleted\nfrom the cache. The time can be ignored completely using ",(0,o.kt)("inlineCode",{parentName:"p"},"ignoreCacheDuration"),", however using this would mean the query\nis never removed from memory."),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"serializer")," is used called the data for a query is retrieved from persistent storage. If you are using\n",(0,o.kt)("a",{parentName:"p",href:"https://pub.dev/packages/cached_storage"},"Cached Storage")," then the data is always stored as json, so you would use the\nserializer to turn it back to the required object. Individually choose to store a query or not with ",(0,o.kt)("inlineCode",{parentName:"p"},"storeQuery.")),(0,o.kt)("p",null,"By default, a query catches any error and emits it as part of the query state. However, in development it is sometimes\nuseful to have the query rethrow to quickly see the full stacktrace in the console, to do this set ",(0,o.kt)("inlineCode",{parentName:"p"},"shouldRethrow")," to\ntrue."),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Using ",(0,o.kt)("inlineCode",{parentName:"p"},"shouldRethrow")," can cause unexpected errors as it prevents most things from happening after an error has occurred.")),(0,o.kt)("h2",{id:"global-configuration"},"Global Configuration"),(0,o.kt)("p",null,"Global configuration allows defaults to be set for all queries. Using the ",(0,o.kt)("inlineCode",{parentName:"p"},"QueryConfig")," on an individual query will\nalways override the global default. To set global defaults pass a config to the cached query instance before any queries\nare called."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-dart"},"CachedQuery.instance.config(\n  config: QueryConfig(\n    refetchDuration: Duration(seconds: 10),\n    cacheDuration: Duration(minutes: 2),\n  ),\n);\n")))}d.isMDXComponent=!0}}]);